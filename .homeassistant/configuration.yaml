homeassistant:
  customize:
     switch.wavepump:
       icon: mdi:water-pump
     switch.wavepump2:
       icon: mdi:water-pump
     switch.refillpump:
       friendly_name: Refill Pump
#       icon: mdi:lightbulb
       icon: mdi:water-pump
     switch.relay5:
       friendly_name: Office Light
       icon: mdi:lightbulb
     switch.fan:
       icon: mdi:fan
     switch.wemo_insight:
       friendly_name: Fish Tank 47g Pumps
       icon: mdi:water-pump
     input_boolean.lightwemotorefillpump:
       friendly_name: Refill Pump Connected
       icon: mdi:water-pump
     switch.wemo_switch_bedroom:
       friendly_name: Bedroom Light
       icon: mdi:lightbulb
     camera.officecam:
       friendly_name: 47g Tank Camera
     sensor.28051686b186ff:
       friendly_name: Room Temp
       icon: mdi:thermometer
     sensor.fishtanktemp:
       friendly_name: Fish Tank Temp
       icon: mdi:thermometer
     switch.living_room_light:
#       friendly_name: Fish Tank 2 Light
       icon: mdi:lightbulb
     sensor.dark_sky_temperature:
       friendly_name: Outside Temperature
     sensor.dark_sky_humidity:
       friendly_name: Humidity
     sensor.dark_sky_precip_probability:
       friendly_name: Chance of Rain 
     sensor.dark_sky_summary:
       friendly_name: Weather Forcast
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: 37.374393
  longitude: -122.049449
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 48
  # metric for Metric, imperial for Imperial
  unit_system: imperial
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/Los_Angeles

# Show links to resources in log and frontend
#introduction:

# Enables the frontend
frontend:

# Enables configuration UI
#config:

remote:
  -  platform: harmony
     name: living_room
     host: 192.168.1.110
     activity: Watch TV

#emulated_hue:
#  listen_port: 80
#  host_ip: 192.168.1.188 

ifttt:
  key: !secret  ifttt_password
wemo:
  static:
    - 192.168.1.61
    - 192.168.1.29
    - 192.168.1.125
switch:
  -  platform: orvibo
     switches:
       -  host: 192.168.1.180
          name: "Carver705"
       -  host: 192.168.1.105
          name: "Fish Tank 10g light"
  - platform: mqtt
    name: "Skimmer"
    state_topic: "fishtank/skimmer/state"
    command_topic: "fishtank/skimmer/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "Fan"
    state_topic: "fishtank/fan/state"
    command_topic: "fishtank/fan/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "relay3"
    state_topic: "fishtank/pumps/state"
    command_topic: "fishtank/pumps/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "refillpump"
    state_topic: "fishtank/refillpump/state"
    command_topic: "fishtank/refillpump/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "relay5"
    state_topic: "fishtank/relay5/state"
    command_topic: "fishtank/relay5/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "relay6"
    state_topic: "fishtank/relay6/state"
    command_topic: "fishtank/relay6/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "wavepump"
    state_topic: "fishtank/relay7/state"
    command_topic: "fishtank/relay7/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
  - platform: mqtt
    name: "wavepump2"
    state_topic: "fishtank/relay8/state"
    command_topic: "fishtank/relay8/command"
    payload_on: "ON"
    payload_off: "OFF"
    optimistic: false
    qos: 0
    retain: true
#  - platform: template
#    switches:
#      bluray:
#        value_template: "{% if is_state('remote.living_room', 'on') %}on{% else %}off{% endif %}"
#        turn_on:
#          service: remote.turn_on
#          entity_id: remote.living_room 
#        turn_off:
#          service: remote.turn_off
#          entity_id: remote.living_room 

mqtt:
  broker:  192.168.1.188
  port: 1883
  keepalive: 60
#  client_id: HAmaster
  
#mqtt_eventstream:
#  subscribe_topic: hass_fishtank/#

#ffmpeg:
#  ffmpeg_bin: /usr/local/bin/ffmpeg

camera:
  - platform: rpi_camera
    name: living room
#    vertical_flip: 1
    image_rotation: 180
    timelapse: 2000
#    horizontal_flip: 1
    file_path:  /tmp/image.png
  - platform: generic
    still_image_url: http://192.168.1.210/mjpeg/snap.cgi?chn=0/snap.jpg
    name: officecam
    username: admin
    password: !secret cam_password
    authentication: digest
#  - platform: ffmpeg
#    input: rtsp:admin:123456@192.168.1.210/live/ch0
#    name: reefer 170

http:
  # Uncomment this to add a password (recommended!)
  api_password: !secret hass_password
  # Uncomment this if you are using SSL or running in Docker etc
  # base_url: example.duckdns.org:8123

# Checks for available updates
updater:

# Discover some devices automatically
discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:

# Track the sun
sun:

# Weather Prediction
sensor:
  - platform: yr
  - platform: rest
    resource: http://ip.jsontest.com
    name: External IP
    value_template: '{{ value_json.ip }}'
  - platform: time_date
    display_options:
      - 'date_time'
  - platform: onewire
#  - platform: command_line
#    name: fishtanktemp
#    command: "python3 /home/homeassistant/.homeassistant/querytanktemp.py"
#    unit_of_measurement: "C"
  - platform: mqtt
    state_topic: "fishtank/temperature"
    name: 'fishtanktemp'
    unit_of_measurement: 'F'
    value_template: '{{ value_json.temperature }}'
  - platform: darksky
    api_key: !secret  sensor_darksky_api
    monitored_conditions:
      - summary
      - precip_probability
      - temperature
      - humidity
#  - platform: wazetraveltime
#    name: Work Travel Time
#    origin: !secret homeaddy
#    destination: !secret workaddy
#    region: US
#  - platform: template
#    sensors:
#      living_room:
#        value_template: '{{ states.remote.living_room.attributes.current_activity}}' 
#        friendly_name: 'Living Room'
      

# Text to speech
tts:
  -  platform: google
     language: 'en'

group: !include groups.yaml

device_tracker:
  - platform: nmap_tracker
    hosts: 192.168.1.28
    home_interval: 10
    consider_home: 180
#device_tracker:
#  - platform: owntracks
#    max_gps_accuracy: 200
#  - platform: asuswrt
#    host: 192.168.1.1
#    username: admin
#    password: !secret asusrt_password
#    protocol: telnet
#    consider_home: 180

automation:
 - alias: Light on when dark
   trigger: 
     platform: sun
     event: sunset
     offset: '-00:25:00'
   condition:
     condition: and
     conditions:
       - condition: state
         entity_id: 'device_tracker.10f1f2827fbd'
         state: 'home'
       - condition: state
         entity_id: 'input_boolean.lightwemotorefillpump'
         state: 'off'
   action:
     -  service: switch.turn_on
        entity_id: switch.living_room_light
automation 2:
 - alias: Auto turnoff
   trigger: 
     platform: time
     at: "02:30:00"
   action:
     -  service: switch.turn_off
        entity_id: switch.living_room_light
     -  service: media_player.turn_off
        data:
           entity_id: media_player.lgtv
automation 3:
 - alias: late night notify
   trigger: 
     platform: time
     at: "00:30:00"
   action:
     -  service: notify.lgtv2
        data:
           message: "It is 12:30"
     -  service: tts.google_say
        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
        data:
           message: "It is 12:30"
automation 4:
 - alias: pump reminder
   trigger: 
     platform: time
     minutes: '/15'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: state
         entity_id: 'device_tracker.10f1f2827fbd'
         state: 'not_home'
       - condition: or
         conditions:
           - condition: state
             entity_id: 'switch.living_room_light'
             state: 'on'
           - condition: state
             entity_id: 'switch.wemo_switch_bedroom'
             state: 'on'
#       - condition: state
#         entity_id: 'switch.fish_tank_pump'
#         state: 'off'
   action:
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"pumps are off or lights are on"}
automation 5:
 - alias: Light on when home
   trigger: 
     platform: state
     entity_id: 'device_tracker.10f1f2827fbd'
     to: 'home'
   condition:
     condition: and
     conditions:
       - condition: sun
         after: sunset
         after_offset: '-00:25:00'
       - condition: state
         entity_id: 'input_boolean.lightwemotorefillpump'
         state: 'off'
   action:
     service: switch.turn_on
     entity_id: switch.living_room_light
automation 6:
 - alias: turn off tv if forgot
   trigger: 
     platform: time
     minutes: '/11'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: state
         entity_id: 'device_tracker.10f1f2827fbd'
         state: 'not_home'
       - condition: state
         entity_id: 'media_player.lgtv'
         state: 'on'
   action:
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"tv is still on"}
automation 7:
 - alias: late late night notify
   trigger: 
     platform: time
     at: "01:00:00"
   action:
     -  service: notify.lgtv2
        data:
           message: "It is 1:00"
automation 8:
 - alias: high temperature alert
   trigger: 
     platform: time
     minutes: '/30'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: numeric_state
         entity_id: 'sensor.28051686b186ff'
         above: '90'
   action:
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"Apt room temperature very high"}
automation 9:
 - alias: tank temperature alert
   trigger: 
     platform: time
     minutes: '/30'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: numeric_state
         entity_id: 'sensor.fishtanktemp'
         above: '85'
   action:
#     -  service: notify.pushb
#        data:
#           message: "Fish Tank temperature very high"
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"Fish Tank temperature very high"}
     -  service: tts.google_say
        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
        data:
           message: "Fish Tank temperature very high"
    
automation 10:
 - alias: tank cold alert
   trigger: 
     platform: time
     minutes: '/30'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: numeric_state
         entity_id: 'sensor.fishtanktemp'
         below: '75'
   action:
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"Fish Tank temperature too cold"}
     -  service: tts.google_say
        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
        data:
           message: "Fish Tank temperature too cold"
    
automation 11:
 - alias: tank fan off
   trigger: 
     platform: time
     minutes: '/15'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: numeric_state
         entity_id: 'sensor.fishtanktemp'
         below: '79.0'
       - condition: state
         entity_id: 'switch.fan'
         state: 'on'
   action:
     -  service: switch.turn_off
        entity_id: switch.fan
automation 12:
 - alias: tank fan on
   trigger: 
     platform: time
     minutes: '/15'
     seconds: 00
   condition:
     condition: and
     conditions:
       - condition: numeric_state
         entity_id: 'sensor.fishtanktemp'
         above: '79.0'
       - condition: state
         entity_id: 'switch.fan'
         state: 'off'
   action:
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"Fish Tank temperature very high. Turning on fan"}
     -  service: switch.turn_on
        entity_id: switch.fan
     -  service: tts.google_say
        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
        data:
           message: "Fish Tank temperature very high. Turning on fan"
    
automation 13:
 - alias: protein skimmer on
   trigger: 
     platform: time
     at: '00:30:00'
   condition:
     condition: and
     conditions:
       - condition: numeric_state
         entity_id: 'sensor.fishtanktemp'
         below: '81'
   action:
     -  service: switch.turn_on
        entity_id: switch.skimmer
automation 14:
 - alias: protein skimmer off
   trigger: 
     platform: time
     at: '07:30:00'
   action:
     -  service: switch.turn_off
        entity_id: switch.skimmer
automation 15:
 - alias: auto refill water
   trigger: 
     platform: state
     entity_id: switch.refillpump
     to: 'on'
   action:
     -  service: script.turn_on
        entity_id: script.refill_timer
 - alias: auto refill reset
   trigger: 
     platform: state
     entity_id: switch.refillpump
     to: 'off'
   action:
     -  service: script.turn_off
        entity_id: script.refill_timer
automation 16:
 - alias: bootstuff
   trigger: 
     platform: homeassistant
     event: start
   action:
     -  service: tts.google_say
        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
#        entity_id: media_player.living_room_home
        data:
          message: "Booting home assistant"
     -  service: notify.lgtv2
        data:
           message: "Booting home assistant"
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"Booting home assistant"}
     -  service: script.restartmqtt
automation 17:
 - alias: pump47 reminder
   trigger: 
     platform: time
     minutes: '/15'
     seconds: 00
   condition:
     - condition: state
       entity_id: 'switch.wemo_insight'
       state: 'off'
   action:
     -  service: ifttt.trigger
        data: {"event":"HA_trigger_message","value1":"pumps are off"}
     -  service: tts.google_say
        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
        data_template:
          message: "pumps are off"
     -  service: notify.lgtv2
        data_template:
          message: "pumps are off"
automation 18:
 - alias: auto refill water 10g
   trigger: 
     platform: state
     entity_id: switch.living_room_light
     to: 'on'
   condition:
     - condition: state
       entity_id: 'input_boolean.lightwemotorefillpump'
       state: 'on'
   action:
     -  service: script.turn_on
        entity_id: script.refill_timer_10g
automation 19:
 - alias: auto refill reset 10g
   trigger: 
     platform: state
     entity_id: switch.living_room_light
     to: 'off'
   action:
     -  service: script.turn_off
        entity_id: script.refill_timer_10g
#automation 19:
# - alias: say hi when home
#   trigger: 
#     platform: state
#     entity_id: 'device_tracker.10f1f2827fbd'
#     to: 'home'
#   action:
#     -  service: tts.google_say
#        entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
#        data_template:
#          message: "Welcome home Rob"
#automation 16:
# - alias: wavemaker
#   trigger: 
#     platform: time
#     minutes: '/15'
##     minutes: '/{{ states.input_slider.wave_period.state | int }}'
#     seconds: 00
##   condition:
##     condition: and
##     conditions:
##       - condition: numeric_state
##         entity_id: 'sensor.fishtanktemp'
##         below: '81'
#   action:
#     -  service: script.turn_on
#        entity_id: script.wavepump_timer
##     -  delay: {{ (("00:" ~ ((range(6,12) | random) | int) ~ ":" ~ ((range(5,55) | random) | int) }}'
##     -  delay:  '00:{{ states.input_slider.wave_interval.state | int }}:00'
##     -  service: switch.turn_off
##        entity_id: switch.wavepump
# - alias: wavemaker reset
#   trigger: 
#     platform: state
#     entity_id: switch.wavepump
#     to: 'off'
#   action:
#     -  service: script.turn_off
#        entity_id: script.wavepump_timer
#automation 17:
# - alias: wavemaker_off
#   trigger: 
#     platform: state
#     entity_id: switch.wavepump
#     to: 'on'
#     for:
#       minutes: '00:{{ states.input_slider.wave_interval.state | int }}:00'
##   condition:
##     condition: and
##     conditions:
##       - condition: numeric_state
##         entity_id: 'sensor.fishtanktemp'
##         below: '81'
#   action:
#     -  service: switch.turn_off
#        entity_id: switch.wavepump
#  

#automation 2:
#   trigger:
#     platform: time
#     minutes: '/5'
#     seconds: 00
#   condition:
#     platform: sun
#     at: sunset
#     offset: '-00:20:00'
#   action:
#   - service: switch.turnon
#   entity_id: switch.living_room_light

media_player: 
  - platform: webostv
    host: 192.168.1.12 
    mac: C8:08:E9:ED:DD:AF
    name: lgtv
    filename: webostv.conf
  - platform: cast
    host: 192.168.1.10 
    mac: 
    name: living_room_home
  - platform: cast
    host: 192.168.1.146 
    mac: 
    name: bedroom_speaker
  - platform: cast
    host: 192.168.1.123 
    mac: 
    name: office_speaker
notify:
  - platform: webostv
    host: 192.168.1.12 
    name: lgtv2
    filename: webostv.conf
  - name: pushb 
    platform: pushbullet
    api_key: !secret pushapi

shell_command:
#   recordtivo: /home/homeassistant/.homeassistant/tivoscript/RECORD
   recordtivo: /home/homeassistant/.homeassistant/githubdownload/pylgtv/tivorecord.py
   tivo5: /home/homeassistant/.homeassistant/tivoscript/NUM5
   tivopause: /home/homeassistant/.homeassistant/tivoscript/PAUSE
   tivoselect: /home/homeassistant/.homeassistant/tivoscript/SELECT
   tivoplay: /home/homeassistant/.homeassistant/tivoscript/PLAY
   tvpause: /home/homeassistant/.homeassistant/githubdownload/pylgtv/pause.py
   tvmute: /home/homeassistant/.homeassistant/githubdownload/pylgtv/mute.py
   tvunmute: /home/homeassistant/.homeassistant/githubdownload/pylgtv/unmute.py
   tvplay: /home/homeassistant/.homeassistant/githubdownload/pylgtv/play.py
   tivoadvance: /home/homeassistant/.homeassistant/tivoscript/ADVANCE
   abctv: /home/homeassistant/.homeassistant/githubdownload/pylgtv/channel.py 1_35_7_1_0_0_0
   nbctv: /home/homeassistant/.homeassistant/githubdownload/pylgtv/channel.py 1_49_11_3_0_0_0
   foxtv: /home/homeassistant/.homeassistant/githubdownload/pylgtv/channel.py 1_48_2_1_0_0_0
   changevolhi: /home/homeassistant/.homeassistant/githubdownload/pylgtv/volumeset.py 30
   changevolzero: /home/homeassistant/.homeassistant/githubdownload/pylgtv/volumeset.py 0
   changevolmed: /home/homeassistant/.homeassistant/githubdownload/pylgtv/volumeset.py 17
   changevollo: /home/homeassistant/.homeassistant/githubdownload/pylgtv/volumeset.py 12
   tivo1: /home/homeassistant/.homeassistant/tivoscript/NUM1
   tivo4: /home/homeassistant/.homeassistant/tivoscript/NUM4
   tivo2: /home/homeassistant/.homeassistant/tivoscript/NUM2
   tivo3: /home/homeassistant/.homeassistant/tivoscript/NUM3
   tivo6: /home/homeassistant/.homeassistant/tivoscript/NUM6
   tivo7: /home/homeassistant/.homeassistant/tivoscript/NUM7
   tivo8: /home/homeassistant/.homeassistant/tivoscript/NUM8
   tivo9: /home/homeassistant/.homeassistant/tivoscript/NUM9
   tivo0: /home/homeassistant/.homeassistant/tivoscript/NUM0
   tivoenter: /home/homeassistant/.homeassistant/tivoscript/ENTER
   tivoright: /home/homeassistant/.homeassistant/tivoscript/RIGHT
   tivoguide: /home/homeassistant/.homeassistant/tivoscript/GUIDE
   tivolivetv: /home/homeassistant/.homeassistant/tivoscript/LIVETV
   restart_ha: systemctl restart home-assistant@homeassistant
   restart_mqtt: /home/homeassistant/.homeassistant/restartmqtt
   restart_vpn: /home/homeassistant/.homeassistant/restartvpn
   kodi: kodi &
#   relay16on: curl -k "http://192.168.1.189/relay16on.php"
#   relay16off: curl -k "http://192.168.1.189/relay16off.php"
#   relay20on: curl -k "http://192.168.1.189/relay20on.php"
#   relay20off: curl -k "http://192.168.1.189/relay20off.php"
#   relay21on: curl -k "http://192.168.1.189/relay21on.php"
#   relay21off: curl -k "http://192.168.1.189/relay21off.php"

script:
   fish_tank_light_off:
     sequence:
       -  service: switch.turn_off
          data:
            entity_id: switch.fish_tank_10g_light
   home_theater:
     sequence:
       -  service: switch.turn_off
          data:
            entity_id: switch.fish_tank_10g_light
       -  service: notify.lgtv2
          data:
             message: "starting home theater"
       -  service: remote.turn_on
          data_template:
            entity_id: remote.living_room
            activity: 28092949
#       -  service: media_player.turn_on
#          data:
#             entity_id: media_player.lgtv
#       -  service: media_player.select_source
#          data:
#            entity_id: media_player.lgtv
#            source: "Home Theater"
       -  service: switch.turn_on
          data:
            entity_id: switch.carver705
       -  delay:  00:00:04
       -  service: switch.turn_off
          data:
            entity_id: switch.living_room_light
#       -  service: remote.send_command
#          data_template:
#            entity_id: remote.living_room
#            command:  Input7.1
#            device: 47147548 
#       -  service: remote.send_command
#          data_template:
#            entity_id: remote.living_room
#            command:  Eject
#            device: 47147547 
   home_theater_off:
     sequence:
#       -  service: switch.turn_off
#          data:
#            entity_id: switch.fish_tank_10g_light
#       -  service: media_player.turn_on
#          data:
#             entity_id: media_player.lgtv
       -  service: remote.turn_off
          data_template:
            entity_id: remote.living_room
            activity: 28092949
#       -  service: media_player.select_source
#          data:
#            entity_id: media_player.lgtv
#            source: "live tv"
       -  service: switch.turn_off
          data:
            entity_id: switch.carver705
       -  condition: sun
          after: sunset
          after_offset: '-00:25:00'
       -  service: switch.turn_on
          data:
            entity_id: switch.living_room_light
#       -  service: remote.send_command
#          data_template:
#            entity_id: remote.living_room
#            command:  PowerToggle
#            device: 47147548 
#       -  service: remote.send_command
#          data_template:
#            entity_id: remote.living_room
#            command:  turn_off
#            device: 47147547 
   home_theater_lights:
     sequence:
       -  service: switch.turn_off
          data:
            entity_id: switch.fish_tank_10g_light
       -  service: switch.turn_off
          data:
            entity_id: switch.living_room_light
   abcontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "livetv"
       -  service: shell_command.abctv
   nbcontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "livetv"
       -  service: shell_command.nbctv
   restartmqtt:
     sequence:
       -  service: shell_command.restart_mqtt
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "restarting m q t t"
   sayroomtemp:
     sequence:
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "room temperature is currently {{states('sensor.28051686b186ff')}} degrees."
       -  service: notify.lgtv2
          data_template:
            message: "room temperature is currently {{states('sensor.28051686b186ff')}} degrees."
   sayfishtanktemp:
     sequence:
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "fish tank temperature is currently {{states('sensor.fishtanktemp')}} degrees."
       -  service: notify.lgtv2
          data_template:
            message: "fish tank temperature is currently {{states('sensor.fishtanktemp')}} degrees."
   restartvpn:
     sequence:
       -  service: shell_command.restartvpn
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "restarting v p n"
   foxontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "livetv"
       -  service: shell_command.foxtv
   cbsontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "Set-top Box"
       -  delay:  00:00:01
       -  service: shell_command.tivo5
       -  delay:  00:00:01
       -  service: shell_command.tivoadvance
       -  service: shell_command.tivo1
       -  service: shell_command.tivoenter
   telemundoontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "Set-top Box"
       -  service: shell_command.tivo4
       -  delay:  00:00:01
       -  service: shell_command.tivo8
       -  service: shell_command.tivoadvance
       -  service: shell_command.tivo1
       -  service: shell_command.tivoenter
   univisionontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "Set-top Box"
       -  service: shell_command.tivo1
       -  delay:  00:00:01
       -  service: shell_command.tivo4
       -  delay:  00:00:01
       -  service: shell_command.tivoadvance
       -  service: shell_command.tivo2
       -  service: shell_command.tivoenter
   restart:
     sequence:
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data:
            message: "restarting home assistant"
       -  service: notify.lgtv2
          data:
             message: "restarting home assistant"
       -  service: ifttt.trigger
          data: {"event":"HA_trigger_message","value1":"restarting home assistant"}
       -  service: homeassistant.restart
#       -  service: shell_command.restart_ha
   recordscript:
     sequence:
       -  service: shell_command.recordtivo
#       -  delay:  00:00:01
#       -  service: shell_command.tivoright
   turnoffall:
     sequence:
       -  service: switch.turn_off
          data:
             entity_id: switch.living_room_light
       -  service: media_player.turn_off
          data:
             entity_id: media_player.lgtv
       -  condition: time
          after: '00:00:00'
          before: '03:00:00'
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "Good Night Robert"
   turnofftv:
     sequence:
       -  service: media_player.turn_off
          data:
             entity_id: media_player.lgtv
   turnontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
   pbsontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "Set-top Box"
       -  service: shell_command.tivo9
       -  delay:  00:00:01
       -  service: shell_command.tivoadvance
       -  service: shell_command.tivo1
       -  service: shell_command.tivoenter
   kodiontv:
     sequence:
       -  service: media_player.turn_on
          data:
             entity_id: media_player.lgtv
       -  service: media_player.select_source
          data:
            entity_id: media_player.lgtv
            source: "kodi"
       -  service: shell_command.kodi
   pauseontv:
     sequence:
       -  service: shell_command.tivopause
#       -  service: shell_command.tvpause
       -  service: media_player.media_pause
          data:
             entity_id: media_player.lgtv
       -  condition: template
          value_template:  '{{ states.remote.living_room.attributes.current_activity=="Watch a Movie" }}'
       -  service: remote.send_command
          data:
            entity_id: remote.living_room
            command: 
              - Pause
            device: 47147547 
            delay_secs: 0.6
   selectontv:
     sequence:
       -  service: shell_command.tivoselect
#       -  service: media_player.media_pause
#          data:
#             entity_id: media_player.lgtv
       -  condition: template
          value_template:  '{{ states.remote.living_room.attributes.current_activity=="Watch a Movie" }}'
       -  service: remote.send_command
          data:
            entity_id: remote.living_room
            command: 
              - Select
            device: 47147547 
            delay_secs: 0.6
   ejectontv:
     sequence:
       -  condition: template
          value_template:  '{{ states.remote.living_room.attributes.current_activity=="Watch a Movie" }}'
       -  service: remote.send_command
          data:
            entity_id: remote.living_room
            command: 
              - Eject
            device: 47147547 
            delay_secs: 0.6
   playontv:
     sequence:
       -  service: shell_command.tivoplay
#       -  service: shell_command.tvplay
       -  service: media_player.media_play
          data:
             entity_id: media_player.lgtv
       -  condition: template
          value_template:  '{{ states.remote.living_room.attributes.current_activity=="Watch a Movie" }}'
       -  service: remote.send_command
          data:
            entity_id: remote.living_room
            command: 
              - Play
            device: 47147547 
            delay_secs: 0.6
   raisevol:
     sequence:
       -  service: remote.send_command
          data_template:
            entity_id: remote.living_room
            command:  VolumeUp
            num_repeats: 8        
            delay_secs: 001        
            device: 47147550 
       -  condition: template
          value_template:  '{{ states.remote.living_room.attributes.current_activity=="Watch a Movie" }}'
       -  service: remote.send_command
          data_template:
            entity_id: remote.living_room
            command:  VolumeUp
            device: 47147548 
            num_repeats: 3        
            delay_secs: 001        
   lowervol:
     sequence:
       -  service: remote.send_command
          data_template:
            entity_id: remote.living_room
            command:  VolumeDown
            num_repeats: 8        
            delay_secs: 001        
            device: 47147550 
       -  condition: template
          value_template:  '{{ states.remote.living_room.attributes.current_activity=="Watch a Movie" }}'
       -  service: remote.send_command
          data_template:
            entity_id: remote.living_room
            command:  VolumeDown
            num_repeats: 3        
            delay_secs: 001        
            device: 47147548 
   eject:
     sequence:
       -  service: remote.send_command
          data:
            entity_id: remote.living_room
            command: 
              - Eject
            device: 47147547 
            delay_secs: 0.6
   play_stereo:
     sequence:
       -  service: switch.turn_off
          data:
            entity_id: switch.fish_tank_10g_light
       -  service: remote.turn_on
          data_template:
            entity_id: remote.living_room
            activity: 31701388
       -  service: switch.turn_on
          data:
            entity_id: switch.carver705
   stop_stereo:
     sequence:
       -  service: remote.turn_off
          data_template:
            entity_id: remote.living_room
            activity: 31701388
       -  service: switch.turn_off
          data:
            entity_id: switch.carver705
   tv_stereo:
     sequence:
       -  service: switch.turn_off
          data:
            entity_id: switch.fish_tank_10g_light
       -  service: notify.lgtv2
          data:
             message: "turning on stereo"
       -  service: remote.turn_on
          data_template:
            entity_id: remote.living_room
            activity: 32528257
       -  service: shell_command.changevolzero
       -  service: switch.turn_on
          data:
            entity_id: switch.carver705
   tv_stereo_off:
     sequence:
       -  service: notify.lgtv2
          data:
             message: "turning off stereo"
       -  service: switch.turn_off
          data:
            entity_id: switch.carver705
       -  service: shell_command.changevolmed
       -  service: remote.turn_off
          data_template:
            entity_id: remote.living_room
            activity: 32528257
   missedcall:
     sequence:
       -  service: notify.lgtv2
          data:
             message: "missed phonecall"
       -  condition: time
          after: '08:00:00'
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "Robert, you missed a call"
   missedtext:
     sequence:
       -  service: notify.lgtv2
          data:
             message: "There was a new text"
       -  condition: time
          after: '08:00:00'
       -  service: tts.google_say
          entity_id: media_player.bedroom_speaker, media_player.living_room_home,media_player.office_speaker
          data_template:
            message: "Robert, there you received a new text"
   refill_timer:
     alias: "Refill Timer"
     sequence:
       -  delay:  '00:{{ states.input_slider.refill_run_time.state | int }}:00'
       -  service: homeassistant.turn_off
          data:
             entity_id: switch.refillpump
   refill_timer_10g:
     alias: "Refill Timer 10g"
     sequence:
       -  delay:  '00:{{ states.input_slider.refill_run_time_10g.state | int }}:00'
       -  service: homeassistant.turn_off
          data:
             entity_id: switch.living_room_light
#   wavepump_timer:
#     alias: "Wave Timer"
#     sequence:
#       -  delay:  '00:{{ states.input_slider.wave_interval.state | int }}:00'
#       -  service: homeassistant.turn_off
#          data:
#             entity_id: switch.wavepump
input_slider:
  refill_run_time:
    name: Refill Run Time
    initial: 5
    min: 1
    max: 15
    step: 1
  refill_run_time_10g:
    name: Refill Run Time 10g
    initial: 5
    min: 1
    max: 15
    step: 1
  wave_interval:
    name: WaveMaker Time
    initial: 13
    min: 1
    max: 15
    step: 1
  wave_period:
    name: WaveMaker Period
    initial: 15
    min: 2
    max: 15
    step: 1
input_boolean:
   lightwemotorefillpump:
      name: Use Wemo for water refill instead of light
      initial: off
